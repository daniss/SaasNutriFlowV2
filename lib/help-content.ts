export interface HelpArticle {
  id: string;
  title: string;
  description: string;
  content: string;
  category: string;
  tags: string[];
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  estimatedReadTime: number; // in minutes
  lastUpdated: string;
  views?: number;
  helpful?: number;
  featured?: boolean;
}

export interface HelpCategory {
  id: string;
  title: string;
  description: string;
  icon: string;
  color: string;
  articles: HelpArticle[];
}

export const helpContent: HelpCategory[] = [
  {
    id: "getting-started",
    title: "Premiers pas",
    description: "Configuration initiale et tour d'horizon de l'interface",
    icon: "Book",
    color: "bg-blue-500",
    articles: [
      {
        id: "welcome-tour",
        title: "Bienvenue sur NutriFlow - Tour d'horizon",
        description: "D√©couvrez les principales fonctionnalit√©s de votre tableau de bord",
        content: `# Bienvenue sur NutriFlow !

F√©licitations ! Vous venez de rejoindre NutriFlow, la plateforme tout-en-un pour les di√©t√©ticiens-nutritionnistes.

## Vue d'ensemble du tableau de bord

Votre tableau de bord est organis√© autour de plusieurs sections principales :

### üè† Tableau de bord
Votre page d'accueil avec les statistiques importantes :
- Nombre de clients actifs
- Rendez-vous du jour
- Plans alimentaires r√©cents
- Revenus du mois

### üë• Clients
G√©rez tous vos clients en un seul endroit :
- Cr√©er de nouveaux profils clients
- Suivre l'√©volution (poids, mesures, photos)
- G√©rer les documents et dossiers m√©dicaux
- Historique des consultations

### üçΩÔ∏è Plans alimentaires
Cr√©ez des plans personnalis√©s :
- G√©n√©rateur IA avec Google Gemini
- Templates r√©utilisables
- Export PDF professionnel
- Analyses nutritionnelles

### üìÖ Rendez-vous
Planifiez vos consultations :
- Calendrier int√©gr√©
- Rappels automatiques
- Gestion des cr√©neaux
- Synchronisation avec votre agenda

### ‚öôÔ∏è Param√®tres
Configurez votre compte :
- Profil professionnel
- S√©curit√© (2FA)
- Pr√©f√©rences
- Facturation

## Navigation

La sidebar gauche vous permet d'acc√©der rapidement √† toutes les fonctionnalit√©s. Elle se r√©duit automatiquement sur mobile et s'√©tend au survol sur desktop.

## Actions rapides

Utilisez les boutons d'actions rapides pour :
- G√©n√©rer un plan avec l'IA
- Ajouter un nouveau client
- Cr√©er un rendez-vous

## Prochaines √©tapes

1. **Compl√©tez votre profil** dans les Param√®tres
2. **Cr√©ez votre premier client** 
3. **Explorez le g√©n√©rateur de plans IA**
4. **Configurez l'authentification √† deux facteurs**

Besoin d'aide ? Notre √©quipe support est disponible via le bouton "Aide & Support" de la sidebar.`,
        category: "getting-started",
        tags: ["d√©marrage", "interface", "navigation"],
        difficulty: "beginner",
        estimatedReadTime: 5,
        lastUpdated: "2024-01-15",
        views: 1543,
        helpful: 142,
        featured: true
      },
      {
        id: "profile-setup",
        title: "Configurer votre profil professionnel",
        description: "Param√©trez vos informations professionnelles et pr√©f√©rences",
        content: `# Configuration de votre profil professionnel

Un profil complet inspire confiance √† vos clients et am√©liore votre visibilit√©.

## Acc√©der aux param√®tres du profil

1. Cliquez sur **Param√®tres** dans la sidebar
2. S√©lectionnez l'onglet **Profil**

## Informations essentielles

### Informations personnelles
- **Nom et pr√©nom** : Utilis√©s sur les documents et factures
- **Email** : Votre adresse de contact principale
- **T√©l√©phone** : Pour les urgences et prises de RDV

### Informations professionnelles
- **Titre professionnel** : Di√©t√©ticien(ne)-nutritionniste, Nutritionniste...
- **Num√©ro ADELI** : Votre num√©ro d'identification professionnel
- **Ann√©es d'exp√©rience** : Affich√© sur votre profil public
- **Bio professionnelle** : Pr√©sentez votre approche et sp√©cialit√©s

### Adresse du cabinet
- **Adresse compl√®te** : Utilis√©e pour les factures et documents
- **Ville et code postal** : Pour la g√©olocalisation
- **Informations compl√©mentaires** : √âtage, interphone, etc.

## Photo de profil

Ajoutez une photo professionnelle :
1. Cliquez sur l'avatar dans les param√®tres
2. S√©lectionnez une image (format JPG/PNG, max 2MB)
3. Recadrez si n√©cessaire
4. Sauvegardez

**Conseils :**
- Photo r√©cente et de qualit√©
- Arri√®re-plan neutre
- Tenue professionnelle
- Sourire bienveillant

## Pr√©f√©rences

### Langue et r√©gion
- **Langue** : Fran√ßais (par d√©faut)
- **Fuseau horaire** : Automatiquement d√©tect√©
- **Format de date** : DD/MM/YYYY (Europe)

### Notifications
Configurez vos alertes :
- Nouveaux messages clients
- Rendez-vous √† venir
- Rappels de suivi
- Mises √† jour syst√®me

## Visibilit√©

Choisissez ce qui est visible pour vos clients :
- ‚úÖ Nom et titre professionnel
- ‚úÖ Photo de profil
- ‚úÖ Bio professionnelle
- ‚úÖ Ann√©es d'exp√©rience
- ‚ùå Num√©ro ADELI (priv√©)
- ‚ùå Adresse compl√®te (optionnel)

## Sauvegarde

N'oubliez pas de cliquer sur **Enregistrer** apr√®s vos modifications !

## D√©pannage

**Probl√®me de t√©l√©chargement de photo ?**
- V√©rifiez la taille (max 2MB)
- Utilisez un format JPG ou PNG
- Assurez-vous d'avoir une connexion stable

**Erreur de sauvegarde ?**
- V√©rifiez tous les champs obligatoires
- Contactez le support si le probl√®me persiste`,
        category: "getting-started",
        tags: ["profil", "configuration", "param√®tres"],
        difficulty: "beginner",
        estimatedReadTime: 3,
        lastUpdated: "2024-01-10",
        views: 892,
        helpful: 78
      }
    ]
  },
  {
    id: "security",
    title: "S√©curit√© & Authentification",
    description: "Configuration de la s√©curit√© et authentification √† deux facteurs",
    icon: "Shield",
    color: "bg-red-500",
    articles: [
      {
        id: "two-factor-auth",
        title: "Configurer l'authentification √† deux facteurs (2FA)",
        description: "S√©curisez votre compte avec l'authentification TOTP",
        content: `# Authentification √† deux facteurs (2FA)

L'authentification √† deux facteurs ajoute une couche de s√©curit√© suppl√©mentaire √† votre compte en demandant un code g√©n√©r√© par votre t√©l√©phone en plus de votre mot de passe.

## Pourquoi activer la 2FA ?

- **S√©curit√© renforc√©e** : M√™me si votre mot de passe est compromis, votre compte reste prot√©g√©
- **Protection des donn√©es clients** : Conformit√© RGPD et protection des donn√©es sensibles
- **Tranquillit√© d'esprit** : Soyez alert√© en cas de tentative de connexion suspecte

## Applications recommand√©es

T√©l√©chargez une de ces applications sur votre smartphone :

### üì± Google Authenticator
- **iOS** : [App Store](https://apps.apple.com/app/google-authenticator/id388497605)
- **Android** : [Google Play](https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2)
- ‚úÖ Gratuit, simple d'utilisation
- ‚úÖ Fonctionne hors ligne

### üì± Authy
- **iOS** : [App Store](https://apps.apple.com/app/authy/id494168017)
- **Android** : [Google Play](https://play.google.com/store/apps/details?id=com.authy.authy)
- ‚úÖ Sauvegarde cloud
- ‚úÖ Multi-appareils

### üì± 1Password
- **iOS** : [App Store](https://apps.apple.com/app/1password-password-manager/id568903335)
- **Android** : [Google Play](https://play.google.com/store/apps/details?id=com.onepassword.android)
- ‚úÖ Gestionnaire de mots de passe int√©gr√©
- üí∞ Payant

## Configuration √©tape par √©tape

### √âtape 1 : Acc√©der aux param√®tres de s√©curit√©

1. Connectez-vous √† NutriFlow
2. Cliquez sur **Param√®tres** dans la sidebar
3. S√©lectionnez l'onglet **S√©curit√©**
4. Trouvez la section "Authentification √† deux facteurs"

### √âtape 2 : Activer la 2FA

1. Cliquez sur **Ajouter facteur** 
2. Une fen√™tre s'ouvre avec un QR code

### √âtape 3 : Scanner le QR code

1. Ouvrez votre application d'authentification
2. Cliquez sur **+** ou **Ajouter un compte**
3. Scannez le QR code affich√© sur votre √©cran
4. Un compte "NutriFlow" appara√Æt dans votre app

### √âtape 4 : V√©rifier la configuration

1. Dans votre app, notez le code √† 6 chiffres pour NutriFlow
2. Saisissez ce code dans le champ "Code de v√©rification"
3. Cliquez sur **V√©rifier et activer**

### √âtape 5 : Codes de r√©cup√©ration

‚ö†Ô∏è **IMPORTANT** : Sauvegardez vos codes de r√©cup√©ration !

1. Notez les codes de r√©cup√©ration affich√©s
2. Stockez-les dans un endroit s√ªr (coffre-fort num√©rique)
3. Ces codes vous permettront d'acc√©der √† votre compte si vous perdez votre t√©l√©phone

## Utilisation quotidienne

### Connexion avec 2FA

1. Saisissez votre email et mot de passe habituel
2. Cliquez sur **Se connecter**
3. Une nouvelle page demande le code 2FA
4. Ouvrez votre app d'authentification
5. Saisissez le code √† 6 chiffres
6. Cliquez sur **V√©rifier**

### Codes de r√©cup√©ration

Si vous n'avez pas acc√®s √† votre t√©l√©phone :
1. Cliquez sur "J'ai perdu mon t√©l√©phone" sur la page 2FA
2. Saisissez un de vos codes de r√©cup√©ration
3. Reconfigurez imm√©diatement la 2FA avec votre nouveau t√©l√©phone

## Gestion des facteurs

### Ajouter un deuxi√®me facteur

Recommand√© pour plus de s√©curit√© :
1. Allez dans **Param√®tres > S√©curit√©**
2. Cliquez sur **Ajouter facteur**
3. Suivez les m√™mes √©tapes avec une autre app ou un autre appareil

### Supprimer un facteur

‚ö†Ô∏è Attention : Cette action est irr√©versible
1. Dans la liste des facteurs configur√©s
2. Cliquez sur l'ic√¥ne de suppression (poubelle)
3. Entrez votre code 2FA pour confirmer
4. Le facteur est imm√©diatement supprim√©

## D√©pannage

### "Code invalide" lors de la configuration
- V√©rifiez que l'heure de votre t√©l√©phone est correcte
- Rescannez le QR code
- Essayez avec une autre app d'authentification

### "J'ai perdu mon t√©l√©phone"
- Utilisez un code de r√©cup√©ration
- Contactez le support si vous n'avez plus vos codes
- Pr√©parez une pi√®ce d'identit√© pour v√©rification

### "L'app ne g√©n√®re plus de codes"
- V√©rifiez l'heure de votre t√©l√©phone
- Red√©marrez l'application
- Re-synchronisez si l'option existe

### "Je ne retrouve plus mes codes de r√©cup√©ration"
- Connectez-vous normalement avec votre 2FA
- Allez dans **Param√®tres > S√©curit√©**
- G√©n√©rez de nouveaux codes de r√©cup√©ration
- Sauvegardez-les imm√©diatement

## Bonnes pratiques

### ‚úÖ √Ä faire
- Testez votre 2FA apr√®s configuration
- Sauvegardez vos codes de r√©cup√©ration dans un gestionnaire de mots de passe
- Configurez la 2FA sur plusieurs appareils
- Mettez √† jour vos codes de r√©cup√©ration r√©guli√®rement

### ‚ùå √Ä √©viter
- Partager vos codes avec qui que ce soit
- Stocker les codes de r√©cup√©ration sur votre t√©l√©phone
- D√©sactiver la 2FA sur un r√©seau public
- Ignorer les alertes de s√©curit√©

## Support

Besoin d'aide ? Notre √©quipe support est disponible :
- **Email** : support@nutriflow.fr
- **Chat** : Bouton d'aide dans l'application
- **T√©l√©phone** : +33 1 XX XX XX XX (heures ouvrables)

La s√©curit√© de vos donn√©es et celles de vos clients est notre priorit√© absolue !`,
        category: "security",
        tags: ["2FA", "s√©curit√©", "authentification", "TOTP"],
        difficulty: "intermediate",
        estimatedReadTime: 8,
        lastUpdated: "2024-01-12",
        views: 1234,
        helpful: 156,
        featured: true
      }
    ]
  },
  {
    id: "meal-planning",
    title: "Plans alimentaires & IA",
    description: "Utilisation du g√©n√©rateur IA et cr√©ation de plans personnalis√©s",
    icon: "Utensils",
    color: "bg-orange-500",
    articles: [
      {
        id: "ai-generator",
        title: "Cr√©er votre premier plan alimentaire avec l'IA",
        description: "Guide complet pour utiliser le g√©n√©rateur IA Google Gemini",
        content: `# G√©n√©rateur de plans alimentaires IA

Notre g√©n√©rateur IA utilise Google Gemini pour cr√©er des plans alimentaires personnalis√©s en quelques minutes.

## Acc√®s au g√©n√©rateur

1. Dans la sidebar, cliquez sur **Plans alimentaires**
2. Cliquez sur **G√©n√©rer avec IA** ou utilisez l'action rapide ‚ö°

## √âtape 1 : Informations client

### Donn√©es obligatoires
- **√Çge** : Pour calculer les besoins √©nerg√©tiques
- **Sexe** : Diff√©rences m√©taboliques homme/femme
- **Poids actuel** : Base du calcul calorique
- **Taille** : Calcul de l'IMC
- **Niveau d'activit√©** : S√©dentaire √† tr√®s actif

### Donn√©es optionnelles
- **Poids objectif** : Pour les plans de perte/prise de poids
- **Allergies alimentaires** : √âviction automatique
- **Intol√©rances** : Lactose, gluten, FODMAP...
- **Pr√©f√©rences** : V√©g√©tarien, v√©gan, sans porc...
- **Aliments d√©test√©s** : √Ä √©viter dans les suggestions

## √âtape 2 : Param√®tres du plan

### Dur√©e et structure
- **Nombre de jours** : 1 √† 14 jours
- **Nombre de repas** : 3 √† 6 repas par jour
- **Collations** : Inclure ou non les en-cas

### Objectifs nutritionnels
- **Maintenance** : Maintien du poids actuel
- **Perte de poids** : D√©ficit calorique mod√©r√© (-500 kcal/jour)
- **Prise de poids** : Surplus calorique (+300-500 kcal/jour)
- **Sport/Performance** : Adaptation aux entra√Ænements

### Style alimentaire
- **√âquilibr√©** : Recommandations PNNS
- **M√©diterran√©en** : Riche en om√©ga-3 et antioxydants
- **Low-carb** : R√©duction des glucides
- **Hyperprot√©in√©** : Pour la prise de masse
- **Anti-inflammatoire** : Aliments riches en antioxydants

## √âtape 3 : G√©n√©ration

1. V√©rifiez tous les param√®tres
2. Cliquez sur **G√©n√©rer le plan**
3. L'IA analyse les donn√©es (30-60 secondes)
4. Le plan appara√Æt avec :
   - Menu d√©taill√© jour par jour
   - Calculs nutritionnels automatiques
   - Liste de courses g√©n√©r√©e
   - Conseils personnalis√©s

## √âtape 4 : Personnalisation

### Modifier un repas
1. Cliquez sur un repas dans le plan
2. **Remplacer** : L'IA propose des alternatives
3. **Modifier les portions** : Ajuster les quantit√©s
4. **Ajouter/Supprimer** des aliments

### Ajuster les calories
- **Trop √©lev√©** : R√©duire les portions ou remplacer par des alternatives moins caloriques
- **Trop faible** : Ajouter des collations ou augmenter les portions

### √âquilibrer les nutriments
- V√©rifiez les % de prot√©ines/glucides/lipides
- L'IA respecte les recommandations nutritionnelles
- Ajustez si besoins sp√©cifiques (sport, pathologie...)

## √âtape 5 : Finalisation

### Pr√©visualisation PDF
1. Cliquez sur **Aper√ßu PDF**
2. V√©rifiez la mise en page
3. Personnalisez l'en-t√™te avec votre logo

### Export et partage
- **PDF complet** : Plan + conseils + liste de courses
- **PDF simplifi√©** : Menus uniquement
- **Envoi email** : Directement au client
- **Portail client** : Accessible dans son espace personnel

## Conseils d'utilisation

### ‚úÖ Bonnes pratiques
- Compl√©tez au maximum le profil client
- V√©rifiez toujours le plan avant envoi
- Personnalisez avec vos recommandations
- Expliquez le plan lors de la consultation

### ‚ö†Ô∏è Points d'attention
- L'IA donne des suggestions, vous restez responsable
- Adaptez selon les pathologies sp√©cifiques
- V√©rifiez les interactions m√©dicamenteuses
- Surveillez la tol√©rance digestive

### üîÑ It√©ration
- Ajustez selon les retours clients
- R√©g√©n√©rez si besoin avec nouveaux param√®tres
- Sauvegardez les versions qui fonctionnent bien
- Cr√©ez des templates pour vos cas fr√©quents

## Exemples d'utilisation

### Plan perte de poids (femme, 35 ans)
- **Profil** : 70kg, 165cm, s√©dentaire
- **Objectif** : -5kg en 3 mois
- **Calories** : 1400 kcal/jour
- **R√©partition** : 25% prot√©ines, 45% glucides, 30% lipides

### Plan sportif (homme, 28 ans)
- **Profil** : 80kg, 180cm, tr√®s actif (musculation)
- **Objectif** : Prise de masse
- **Calories** : 2800 kcal/jour
- **Focus** : Prot√©ines post-entra√Ænement

### Plan m√©diterran√©en (senior, 65 ans)
- **Profil** : Pr√©vention cardiovasculaire
- **Style** : M√©diterran√©en riche en om√©ga-3
- **Sp√©cificit√©s** : Peu de sel, beaucoup de l√©gumes

## D√©pannage

### "G√©n√©ration √©chou√©e"
- V√©rifiez votre connexion internet
- R√©duisez le nombre de contraintes
- Contactez le support si persistant

### "Plan trop restrictif"
- Augmentez les calories cibles
- R√©duisez les exclusions alimentaires
- Choisissez "√âquilibr√©" comme style

### "Erreur de calcul"
- V√©rifiez les donn√©es anthropom√©triques
- Recalculez avec les bonnes unit√©s
- Contactez le support pour signaler le bug

L'IA est un outil puissant qui vous fait gagner du temps tout en gardant votre expertise au centre de la prise en charge !`,
        category: "meal-planning",
        tags: ["IA", "g√©n√©rateur", "Gemini", "plan alimentaire"],
        difficulty: "intermediate",
        estimatedReadTime: 10,
        lastUpdated: "2024-01-08",
        views: 987,
        helpful: 89,
        featured: true
      }
    ]
  }
];

// Search functionality
export function searchArticles(query: string, categories?: string[]): HelpArticle[] {
  if (!query.trim()) return [];
  
  const searchTerms = query.toLowerCase().split(' ');
  const allArticles = helpContent.flatMap(cat => 
    categories && categories.length > 0 && !categories.includes(cat.id) 
      ? [] 
      : cat.articles
  );
  
  return allArticles.filter(article => {
    const searchableText = [
      article.title,
      article.description,
      article.content,
      ...article.tags
    ].join(' ').toLowerCase();
    
    return searchTerms.every(term => searchableText.includes(term));
  }).sort((a, b) => {
    // Prioritize featured articles
    if (a.featured && !b.featured) return -1;
    if (!a.featured && b.featured) return 1;
    
    // Then by views
    return (b.views || 0) - (a.views || 0);
  });
}

// Get article by ID
export function getArticleById(id: string): HelpArticle | null {
  for (const category of helpContent) {
    const article = category.articles.find(a => a.id === id);
    if (article) return article;
  }
  return null;
}

// Get category by ID
export function getCategoryById(id: string): HelpCategory | null {
  return helpContent.find(cat => cat.id === id) || null;
}

// Get popular articles
export function getPopularArticles(limit: number = 5): HelpArticle[] {
  const allArticles = helpContent.flatMap(cat => cat.articles);
  return allArticles
    .sort((a, b) => (b.views || 0) - (a.views || 0))
    .slice(0, limit);
}

// Get featured articles
export function getFeaturedArticles(): HelpArticle[] {
  const allArticles = helpContent.flatMap(cat => cat.articles);
  return allArticles.filter(article => article.featured);
}